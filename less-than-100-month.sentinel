
import "decimal"
import "tfplan"
import "tfrun"

# Define the maximum allowed monthly cost
max_cost = decimal.new("10000.00")

# Get the cost estimate from the Terraform run
cost_estimate = tfrun.cost_estimate

# Ensure the cost estimate is less than the maximum allowed cost
main = rule {
  cost_estimate.monthly_cost < max_cost
}
